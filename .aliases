# Use saner defaults
alias cp='cp -iv'
alias df='df -kh'               # Free disk space
alias du='du -khs'              # Disk usage
alias feh='feh -Zr'             # Fast image viewer
alias mkdir='mkdir -p'
alias tmux='TERM=xterm-256color tmux'
alias vi='vim'

# Quick one-letter aliases
#
# Related: (defined in .aliases-functions.sh)
# - t
#
alias b="rsync -azvvhP --exclude '.*' $( basename $PWD )/ "
alias c='git clone'
alias s='git status'
alias S='sudo !!'               # Use Tab to autocomplete if required
alias d='git diff'
alias f='ranger'                # File manager
alias i="feh"                   # Image viewer
alias m="mpv"                   # Movie player
alias q="git q"                 # Quick short git log
alias u="cd .. && pwd && ls"    # cd “up” to the parent directory

# Backup
#
# Related: (defined in .aliases-functions.sh)
# - drybackup
# - drysyncdir
#
alias backup='rsync -azvvhP --exclude ".*"'
alias syncdir='rsync -azvvhP  --delete-after --exclude ".*"'

# Git. Inspired by Magit’s shortcuts in Emacs.
alias ds='git diff --staged'
alias fu='git fetch origin'
alias ru='git rebase "@{u}"'
alias tip='git log -1 --name-status'

# Git remotes
alias GCS="git clone git@git.sr.ht:~debajit/"
alias GCC="git clone git@codeberg.org:debajit/NAME.git"
alias GCD="git clone git@git.disroot.org:debajit/NAME.git"
alias GCG="git clone git@github.com:debajit/NAME.git"
alias GRS="git remote add srht git@git.sr.ht:~debajit/$( basename $PWD )"
alias GRC="git remote add codeberg git@codeberg.org:debajit/$( basename $PWD ).git"
alias GRD="git remote add disroot git@git.disroot.org:debajit/$( basename $PWD ).git"
alias GRG="git remote add github git@github.com:debajit/$( basename $PWD ).git"

# ls
alias ls='exa'
alias la='exa -la'              # Show all files, including dotfiles
alias ll='exa -l'               # Show long listing
alias lk='exa -l --sort size'   # Long listing by size, largest size at the bottom
alias lt='exa -l --sort newest' # Lists sorted by date, most recent last

# Aliases with OS-specific implementations
# See OS detection in https://stackoverflow.com/a/18434831/2288585
case "$OSTYPE" in
  # Linux
  linux*)
    alias o="xdg-open"
    alias pi="sudo pacman -S"   # Package install
    alias pr="sudo pacman -Rsc" # Package remove/uninstall
    alias pq="pacman -Ss"       # Package query/search/info
    ;;

  # macOS
  darwin*)
    alias o="open"
    alias pi="brew install"     # Package install
    alias pr="brew uninstall"   # Package remove/uninstall
    alias pq="brew search"      # Package query/search/info
    alias pu="brew upgrade"     # Upgrade a single package
    ;;
esac

# Directory jumping. “1” to jump to the last dir and so on.
alias j='dirs -v'               # List recent dirs to jump to them quickly
for index ({1..9}) alias "$index"="cd +${index}"; unset index

# Other aliases
alias diffk='kitty +kitten diff'   # See https://sw.kovidgoyal.net/kitty/kittens/diff.html
alias ir='i -z'                    # Display images, in random order
alias tm='tmux a -d'               # Connect to tmux session

#
# Useful utility aliases
#

# Start web server from current dir. Port optional: `start-web-server 1111`
alias start-web-server='python3 -m http.server'
